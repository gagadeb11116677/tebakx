<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TebakX v3.6 NCS Winter Edition</title>
  <!-- Google Fonts untuk tampilan modern -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Mountains+of+Christmas&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #1e40af;      /* biru gelap */
      --secondary: #3b82f6;    /* biru sedang */
      --accent: #f59e0b;       /* kuning gold */
      --bg: #f8fafc;           /* abu muda */
      --text: #1e293b;         /* teks gelap */
      --radius: 16px;
      --shadow: 0 10px 25px rgba(0,0,0,0.1);
      --winter-primary: #0c4a6e; /* biru gelap musim dingin */
      --winter-secondary: #0ea5e9; /* biru muda es */
      --winter-accent: #f0f9ff; /* putih salju */
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    html, body {
      min-height: 100vh;
      width: 100vw;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary) 90%);
      color: var(--text);
      overflow-x: hidden;
      position: relative;
    }
    
    /* Animasi Salju */
    .snowflake {
      position: fixed;
      top: -10px;
      z-index: 9999;
      user-select: none;
      cursor: default;
      animation: snowfall linear infinite;
      color: rgba(255, 255, 255, 0.8);
      font-size: 1em;
    }
    @keyframes snowfall {
      0% { transform: translateY(-100px) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(360deg); }
    }
    
    /* Efek Beku */
    .frost-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></svg>');
      pointer-events: none;
      z-index: 1;
      opacity: 0.3;
    }
    
    /* Tombol Tema */
    .theme-btn {
      position: fixed;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: bold;
      z-index: 10001;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
    }
    
    #zazThemeBtn {
      top: 15px;
      left: 15px;
      background: #1e293b;
      color: #f59e0b;
    }
    
    #winterThemeBtn {
      top: 75px;
      left: 15px;
      background: #0c4a6e;
      color: #e0f2fe;
    }
    
    .theme-btn:hover, .theme-btn.active {
      transform: scale(1.1);
    }
    
    #zazThemeBtn.active {
      background: #f59e0b;
      color: #1e293b;
    }
    
    #winterThemeBtn.active {
      background: #e0f2fe;
      color: #0c4a6e;
    }
    
    /* Tombol Kembali */
    .back-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      z-index: 10001;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
    }
    
    .back-btn:hover {
      transform: scale(1.1);
      background: white;
    }
    
    /* Container */
    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      max-width: 500px;
      width: 90%;
      margin: 20px auto;
      padding: 30px;
      text-align: center;
      animation: fadeIn 0.7s ease;
      position: relative;
      z-index: 2;
      backdrop-filter: blur(10px);
    }
    
    @media (max-width: 600px) {
      .container {
        width: 95%;
        margin: 15px auto;
        padding: 20px;
      }
    }
    
    /* Typography */
    h1 {
      font-size: 2.2rem;
      margin-bottom: 15px;
      color: var(--primary);
      font-weight: 700;
      line-height: 1.2;
    }
    
    h2 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: var(--primary);
      font-weight: 600;
    }
    
    p {
      margin-bottom: 20px;
      color: #64748b;
      font-size: 1rem;
      line-height: 1.6;
    }
    
    /* Buttons */
    .btn {
      display: inline-block;
      padding: 14px 24px;
      margin: 8px 6px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
      color: white;
    }
    
    .btn-secondary:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(139, 92, 246, 0.4);
    }
    
    .btn-accent {
      background: linear-gradient(135deg, #f59e0b, #fbbf24);
      color: white;
    }
    
    .btn-accent:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #10b981, #34d399);
      color: white;
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ef4444, #f87171);
      color: white;
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }
    
    /* Form Elements */
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--primary);
    }
    
    .form-control {
      width: 100%;
      padding: 14px 16px;
      font-size: 1rem;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      background: white;
      color: var(--text);
      transition: all 0.3s ease;
      outline: none;
    }
    
    .form-control:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 1.2rem;
    }
    
    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
    }
    
    .card-body {
      color: #64748b;
    }
    
    /* Daily Challenge Card */
    .daily-challenge {
      background: linear-gradient(135deg, #0ea5e9, #7dd3fc);
      color: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
    }
    
    .daily-challenge .card-title {
      color: white;
    }
    
    .daily-challenge .card-body {
      color: rgba(255,255,255,0.9);
    }
    
    .daily-challenge .btn {
      background: white;
      color: #0ea5e9;
      margin-top: 15px;
    }
    
    .daily-challenge .btn:hover {
      background: rgba(255,255,255,0.9);
    }
    
    /* Theme Picker */
    .theme-picker {
      margin: 20px 0;
      text-align: left;
    }
    
    .theme-picker select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 1rem;
      background: white;
      color: var(--primary);
      outline: none;
      cursor: pointer;
    }
    
    /* Game Area */
    .game-stats {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .stat-item {
      background: #f1f5f9;
      border-radius: 12px;
      padding: 15px;
      flex: 1;
      min-width: 120px;
      margin: 5px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.85rem;
      color: #64748b;
      margin-top: 5px;
    }
    
    /* Result Display */
    .result-display {
      background: #f1f5f9;
      border-radius: 12px;
      padding: 15px;
      margin: 15px 0;
      font-weight: 600;
      color: var(--primary);
    }
    
    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeIn 0.4s ease;
      padding: 20px;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      animation: slideUp 0.5s ease;
    }
    
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    /* Splash Screen */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(135deg, #1e40af, #3b82f6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      flex-direction: column;
      animation: fadeIn 0.7s ease;
    }
    
    .splash-content {
      text-align: center;
      color: white;
      animation: fadeIn 0.5s ease;
    }
    
    .splash-logo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, #f59e0b, #fbbf24);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
      color: white;
    }
    
    .splash-content h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      color: white;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    .splash-content .version {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: rgba(255,255,255,0.9);
    }
    
    .splash-bar {
      width: 250px;
      height: 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      margin: 30px auto;
      overflow: hidden;
    }
    
    .splash-bar-inner {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #f59e0b, #fbbf24);
      border-radius: 10px;
      animation: splashBarAnim 2.5s linear forwards;
    }
    
    @keyframes splashBarAnim {
      0% { width: 0; }
      100% { width: 100%; }
    }
    
    .splash-features {
      margin-top: 30px;
      text-align: left;
      max-width: 400px;
    }
    
    .splash-features ul {
      list-style: none;
      padding: 0;
    }
    
    .splash-features li {
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      color: rgba(255,255,255,0.9);
    }
    
    .splash-features li i {
      margin-right: 10px;
      color: #f59e0b;
    }
    
    /* Confetti */
    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 0;
      pointer-events: none;
      overflow: visible;
      z-index: 1000;
    }
    
    .confetti {
      position: absolute;
      top: -10px;
      width: 10px;
      height: 10px;
      opacity: 0.9;
      transform: rotate(0deg);
      animation: confetti-fall 7s linear infinite;
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    /* Notification */
    .notification {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #1e40af, #3b82f6);
      color: white;
      padding: 16px 24px;
      border-radius: 50px;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(30, 64, 175, 0.3);
      z-index: 9999;
      animation: slideUp 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
    }
    
    @keyframes fadeOut {
      to { opacity: 0; transform: translateX(-50%) translateY(20px); }
    }
    
    /* Achievement Notification */
    .achievement-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #f59e0b, #fbbf24);
      color: white;
      padding: 16px 20px;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
      z-index: 10000;
      max-width: 300px;
      animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }
    
    /* Level Up Animation */
    .level-up {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #10b981, #34d399);
      color: white;
      padding: 20px 30px;
      border-radius: 20px;
      font-size: 1.5rem;
      font-weight: 700;
      box-shadow: 0 15px 35px rgba(16, 185, 129, 0.4);
      z-index: 4000;
      animation: levelUpAnim 2s ease-out forwards;
    }
    
    @keyframes levelUpAnim {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
    }
    
    /* Combo Effect */
    .combo-effect {
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #ef4444, #f87171);
      color: white;
      padding: 15px 25px;
      border-radius: 50px;
      font-size: 1.8rem;
      font-weight: 700;
      box-shadow: 0 10px 25px rgba(239, 68, 68, 0.4);
      z-index: 4000;
      animation: comboAnim 1.5s ease-out forwards;
    }
    
    @keyframes comboAnim {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
    }
    
    /* Lightning Effect */
    .lightning-effect {
      animation: lightning 0.5s ease-in-out infinite alternate;
    }
    
    @keyframes lightning {
      0% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #3b82f6, 0 0 35px #3b82f6, 0 0 40px #3b82f6; }
      100% { text-shadow: 0 0 2px #fff, 0 0 5px #fff, 0 0 8px #fff, 0 0 12px #3b82f6, 0 0 18px #3b82f6, 0 0 25px #3b82f6; }
    }
    
    /* Progress Bar */
    .progress {
      height: 10px;
      background: #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6, #60a5fa);
      border-radius: 10px;
      transition: width 0.5s ease;
    }
    
    /* List */
    .list-group {
      list-style: none;
      padding: 0;
      margin: 20px 0;
    }
    
    .list-group-item {
      background: #f1f5f9;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .list-group-item:hover {
      background: #e2e8f0;
    }
    
    /* Grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .grid-item {
      background: #f1f5f9;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .grid-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    /* Coin Display */
    .coin-display {
      position: fixed;
      top: 15px;
      right: 70px;
      background: linear-gradient(135deg, #f59e0b, #fbbf24);
      color: white;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
      z-index: 9999;
      display: flex;
      align-items: center;
    }
    
    .coin-display i {
      margin-right: 8px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 1.8rem; }
      h2 { font-size: 1.5rem; }
      .container { padding: 20px; }
      .btn { padding: 12px 20px; font-size: 0.9rem; }
      .coin-display { 
        top: 10px; 
        right: 60px; 
        padding: 8px 16px; 
        font-size: 0.9rem; 
      }
      .theme-btn, .back-btn { 
        width: 42px; 
        height: 42px; 
        font-size: 1rem; 
      }
      #zazThemeBtn { top: 10px; left: 10px; }
      #winterThemeBtn { top: 60px; left: 10px; }
    }
    
    @media (max-width: 480px) {
      h1 { font-size: 1.5rem; }
      .container { width: 98%; margin: 10px auto; padding: 15px; }
      .game-stats { flex-direction: column; }
      .stat-item { margin: 5px 0; }
      .grid { grid-template-columns: repeat(2, 1fr); }
    }
    
    /* Utility Classes */
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align: right; }
    .mt-10 { margin-top: 10px; }
    .mt-20 { margin-top: 20px; }
    .mb-10 { margin-bottom: 10px; }
    .mb-20 { margin-bottom: 20px; }
    .d-flex { display: flex; }
    .justify-between { justify-content: space-between; }
    .align-center { align-items: center; }
    .flex-column { flex-direction: column; }
    .w-100 { width: 100%; }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <!-- Tombol Tema -->
  <button id="zazThemeBtn" class="theme-btn" title="Aktifkan/Matikan Zaz Version">Z</button>
  <button id="winterThemeBtn" class="theme-btn" title="Aktifkan/Matikan Winter Theme">‚ùÑÔ∏è</button>
  
  <!-- Tombol Kembali -->
  <button id="backBtn" class="back-btn" title="Kembali" style="display: none;">
    <i class="fas fa-arrow-left"></i>
  </button>
  
  <!-- Display Koin -->
  <div id="coinDisplay" class="coin-display">
    <i class="fas fa-coins"></i> <span id="coinAmount">0</span>
  </div>
  
  <!-- Splash Screen -->
  <div id="splashScreen" class="splash-screen">
    <div class="splash-content">
      <div class="splash-logo">
        <i class="fas fa-dice-d20"></i>
      </div>
      <h1>TEBAKX</h1>
      <div class="version">v3.6 NCS Winter Edition</div>
      <div class="splash-bar">
        <div class="splash-bar-inner"></div>
      </div>
      <div class="splash-features">
        <ul>
          <li><i class="fas fa-check-circle"></i> Desain UI/UX Modern & Responsif</li>
          <li><i class="fas fa-check-circle"></i> Tema Musim Dingin dengan Efek Salju</li>
          <li><i class="fas fa-check-circle"></i> Tantangan Harian & Pencapaian</li>
          <li><i class="fas fa-check-circle"></i> Mode Versus AI yang Lebih Cerdas</li>
          <li><i class="fas fa-check-circle"></i> Sistem Level & Combo yang Ditingkatkan</li>
          <li><i class="fas fa-check-circle"></i> Performa Optimal di Semua Perangkat</li>
        </ul>
      </div>
      <p style="margin-top: 30px; font-weight: 600;">Powered by XOBE DEVELOPMENT</p>
    </div>
  </div>
  
  <!-- Menu Utama -->
  <div id="mainMenu" class="container hidden">
    <h1>TebakX <span style="color: #3b82f6;">NCS Winter Edition</span></h1>
    <p>Uji instingmu dalam tantangan tebak angka yang seru!</p>
    
    <!-- Daily Challenge Card -->
    <div class="daily-challenge">
      <div class="card-header">
        <div class="card-icon" style="background: rgba(255,255,255,0.2);">
          <i class="fas fa-trophy"></i>
        </div>
        <div class="card-title">Tantangan Harian</div>
      </div>
      <div class="card-body">
        <p id="dailyChallengeDesc">Tebak angka dalam kurang dari 5 percobaan!</p>
        <button class="btn" onclick="startDailyChallenge()">Mainkan Sekarang</button>
      </div>
    </div>
    
    <!-- Game Modes -->
    <div class="grid">
      <div class="grid-item">
        <i class="fas fa-play-circle" style="font-size: 2rem; color: #3b82f6; margin-bottom: 10px;"></i>
        <h3>Mode Classic</h3>
        <button class="btn btn-primary w-100" onclick="showVerification()">Mulai Game</button>
      </div>
      <div class="grid-item">
        <i class="fas fa-robot" style="font-size: 2rem; color: #8b5cf6; margin-bottom: 10px;"></i>
        <h3>Mode AI</h3>
        <button class="btn btn-secondary w-100" onclick="startAIMode()">Versus AI</button>
      </div>
      <div class="grid-item">
        <i class="fas fa-bullseye" style="font-size: 2rem; color: #10b981; margin-bottom: 10px;"></i>
        <h3>Quest</h3>
        <button class="btn btn-success w-100" onclick="showQuestPopup()">Lihat Quest</button>
      </div>
      <div class="grid-item">
        <i class="fas fa-medal" style="font-size: 2rem; color: #f59e0b; margin-bottom: 10px;"></i>
        <h3>Achievements</h3>
        <button class="btn btn-accent w-100" onclick="showAchievements()">Lihat</button>
      </div>
    </div>
    
    <!-- Theme Picker -->
    <div class="theme-picker">
      <label class="form-label">Pilih Tema:</label>
      <select id="themeSelect" class="form-control" onchange="changeTheme()">
        <option value="dark">Gelap</option>
        <option value="light">Terang</option>
        <option value="neon">Neon</option>
        <option value="winter">‚ùÑÔ∏è Winter</option>
        <option value="custom">Custom</option>
        <option value="rainbow" disabled>üåà Rainbow (Beli di Shop)</option>
        <option value="orion" disabled>ü™ê Orion (Beli di Shop)</option>
        <option value="cyber" disabled>ü§ñ Tea Cyber (Beli di Shop)</option>
      </select>
      <div id="customThemePicker" class="hidden mt-10">
        <div class="d-flex align-center">
          <label class="mr-10">Warna 1:</label>
          <input type="color" id="color1" value="#6a11cb" onchange="applyCustomTheme()" class="mr-10">
          <label class="mr-10">Warna 2:</label>
          <input type="color" id="color2" value="#2575fc" onchange="applyCustomTheme()">
        </div>
      </div>
    </div>
    
    <!-- Additional Buttons -->
    <div class="mt-20">
      <button class="btn btn-secondary" onclick="showThemeShop()">
        <i class="fas fa-shopping-cart mr-5"></i> Shop Tema
      </button>
      <button class="btn btn-accent" onclick="showChangelog()">
        <i class="fas fa-history mr-5"></i> Changelog
      </button>
      <button class="btn btn-danger" onclick="resetAllData()">
        <i class="fas fa-trash-alt mr-5"></i> Reset Data
      </button>
    </div>
  </div>
  
  <!-- Area Permainan -->
  <div id="gameArea" class="container hidden">
    <h1>Mode Classic</h1>
    <p>Tebak angka antara 1 dan 100!</p>
    
    <div class="game-stats">
      <div class="stat-item">
        <div class="stat-value" id="attemptsCount">0</div>
        <div class="stat-label">Percobaan</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="timer">0</div>
        <div class="stat-label">Detik</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="comboCount">0</div>
        <div class="stat-label">Combo</div>
      </div>
    </div>
    
    <div class="form-group">
      <input type="number" id="guess" class="form-control" placeholder="Masukkan tebakan">
    </div>
    
    <div class="d-flex flex-column">
      <button id="guessBtn" class="btn btn-primary" onclick="makeGuess()">Tebak</button>
      <button id="hintBtn" class="btn btn-secondary" onclick="showHint()">Hint</button>
      <button id="resetBtn" class="btn btn-danger" onclick="resetGame()" style="display: none;">Reset Game</button>
    </div>
    
    <div class="result-display" id="result"></div>
    <div class="result-display" id="feedback"></div>
    <div class="result-display" id="hint"></div>
    
    <div class="mt-20">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="card-title">Statistik</div>
        </div>
        <div class="card-body">
          <p>Best Score: <span id="highScore">-</span></p>
          <p>Total Games: <span id="totalGames">0</span></p>
          <p>Win Rate: <span id="winRate">0%</span></p>
        </div>
      </div>
    </div>
    
    <div class="mt-10">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
            <i class="fas fa-star"></i>
          </div>
          <div class="card-title">Level</div>
        </div>
        <div class="card-body">
          <div class="progress">
            <div class="progress-bar" id="levelProgress" style="width: 0%"></div>
          </div>
          <p>Level <span id="currentLevel">1</span> (<span id="levelTitle">Beginner</span>)</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Mode AI -->
  <div id="aiMode" class="container hidden">
    <h1>Mode Versus AI</h1>
    <p>Balapan tebak angka melawan AI! Siapa yang lebih cepat?</p>
    
    <div class="form-group">
      <label class="form-label">Tingkat Kesulitan AI:</label>
      <select id="aiDifficulty" class="form-control">
        <option value="easy">Easy</option>
        <option value="medium" selected>Medium</option>
        <option value="hard">Hard</option>
        <option value="expert">Expert</option>
      </select>
    </div>
    
    <div class="game-stats">
      <div class="stat-item">
        <div class="stat-value" id="playerAttempts">0</div>
        <div class="stat-label">Percobaanmu</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="aiAttempts">0</div>
        <div class="stat-label">Percobaan AI</div>
      </div>
    </div>
    
    <div class="form-group">
      <input type="number" id="playerGuess" class="form-control" placeholder="Masukkan tebakan Anda">
    </div>
    
    <button class="btn btn-primary" onclick="playerMakeGuess()">Tebak</button>
    
    <div class="mt-20">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
            <i class="fas fa-robot"></i>
          </div>
          <div class="card-title">Status AI</div>
        </div>
        <div class="card-body" id="aiStatus">
          <p>AI sedang berpikir...</p>
        </div>
      </div>
    </div>
    
    <div class="mt-20">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
            <i class="fas fa-trophy"></i>
          </div>
          <div class="card-title">Hasil</div>
        </div>
        <div class="card-body">
          <p id="aiResult"></p>
          <p id="playerResult"></p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal Verifikasi -->
  <div id="verificationModal" class="modal hidden">
    <div class="modal-content">
      <h2>Verifikasi</h2>
      <p>Masukkan kode verifikasi: <strong>zaS nEON</strong></p>
      <div class="form-group">
        <input type="text" id="verificationInput" class="form-control" placeholder="Ketik kode verifikasi">
      </div>
      <div class="d-flex">
        <button class="btn btn-primary" onclick="verifyUser()">Verifikasi</button>
        <button class="btn btn-secondary" onclick="closeVerificationModal()">Tutup</button>
      </div>
    </div>
  </div>
  
  <!-- Modal Quest -->
  <div id="questModal" class="modal hidden"></div>
  
  <!-- Modal Shop Tema -->
  <div id="themeShopModal" class="modal hidden"></div>
  
  <!-- Modal Achievements -->
  <div id="achievementsModal" class="modal hidden"></div>
  
  <!-- Modal Changelog -->
  <div id="changelogModal" class="modal hidden"></div>
  
  <!-- Confetti Container -->
  <div id="confettiContainer" class="confetti-container"></div>
  
  <!-- Efek Frost untuk Winter Theme -->
  <div id="frostEffect" class="frost-effect hidden"></div>
  
  <script>
    // Variabel Global
    let secretNumber;
    const maxNumber = 100;
    let attempts = 0;
    let guessHistory = [];
    let startTime;
    let comboCount = 0;
    let level = 1;
    let isDailyChallenge = false;
    let dailyChallengeCompleted = false;
    let gameTimer;
    let currentTime = 0;
    
    // Variabel Mode AI
    let aiNumber;
    let playerAttemptsAI = 0;
    let aiAttemptsAI = 0;
    let aiMin = 1;
    let aiMax = 100;
    let aiThinking = false;
    
    // Variabel Koin
    let userCoins = Number(localStorage.getItem('userCoins') || 0);
    
    // Sistem Level
    const LEVELS = [
      { name: "Beginner", min: 0, max: 4 },
      { name: "Intermediate", min: 5, max: 9 },
      { name: "Advanced", min: 10, max: 19 },
      { name: "Expert", min: 20, max: 29 },
      { name: "Master", min: 30, max: 49 },
      { name: "Grandmaster", min: 50, max: 74 },
      { name: "Legend", min: 75, max: 99 },
      { name: "Ultimate", min: 100, max: Infinity }
    ];
    
    // Sistem Quest
    const QUESTS = [
      { id: "daily1", type: "daily", desc: "Main 1x hari ini", goal: 1, reward: 10 },
      { id: "daily2", type: "daily", desc: "Menang 2x hari ini", goal: 2, reward: 20 },
      { id: "weekly1", type: "weekly", desc: "Main 5x minggu ini", goal: 5, reward: 30 },
      { id: "weekly2", type: "weekly", desc: "Menang 7x minggu ini", goal: 7, reward: 40 }
    ];
    
    // Sistem Achievement
    const ACHIEVEMENTS = [
      { id: "firstWin", name: "Kemenangan Pertama", desc: "Menangkan game pertama Anda", icon: "üèÜ" },
      { id: "speedDemon", name: "Speed Demon", desc: "Menang dalam kurang dari 10 detik", icon: "‚ö°" },
      { id: "lucky7", name: "Lucky 7", desc: "Menang dalam 7 percobaan atau kurang", icon: "üçÄ" },
      { id: "comboMaster", name: "Combo Master", desc: "Dapatkan combo x5", icon: "üî•" },
      { id: "dailyChallenge", name: "Pecinta Tantangan", desc: "Selesaikan tantangan harian", icon: "üéØ" },
      { id: "beatAI", name: "Pemburu AI", desc: "Kalahkan AI dalam mode versus", icon: "ü§ñ" },
      { id: "levelUp", name: "Level Up", desc: "Capai level 5", icon: "‚¨ÜÔ∏è" },
      { id: "winterMaster", name: "Winter Master", desc: "Mainkan 10 game dengan tema winter", icon: "‚ùÑÔ∏è" },
      { id: "coinCollector", name: "Pengumpul Koin", desc: "Kumpulkan 500 koin", icon: "üí∞" },
      { id: "perfectGame", name: "Game Sempurna", desc: "Menang dalam 1 percobaan", icon: "üíé" }
    ];
    
    // Shop Tema
    const THEME_SHOP = [
      { id: "rainbow", name: "üåà Rainbow", price: 100, desc: "Tema animasi pelangi super keren!" },
      { id: "orion", name: "ü™ê Orion", price: 80, desc: "Tema galaksi biru gelap elegan." },
      { id: "cyber", name: "ü§ñ Tea Cyber", price: 60, desc: "Tema cyber biru modern." },
      { id: "fire", name: "üî• Fire", price: 120, desc: "Tema api yang membara!" },
      { id: "nature", name: "üåø Nature", price: 90, desc: "Tema alam yang hijau dan segar." }
    ];
    
    // Inisialisasi
    window.onload = function() {
      // Tampilkan splash screen dan otomatis tutup setelah 3 detik
      setTimeout(() => {
        document.getElementById('splashScreen').classList.add('hidden');
        document.getElementById('mainMenu').classList.remove('hidden');
      }, 3000);
      
      // Restore tema
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'zaz') {
        document.body.classList.add('zaz-theme');
        document.getElementById('zazThemeBtn').classList.add('active');
      } else if (savedTheme === 'winter') {
        document.body.classList.add('winter-theme');
        document.getElementById('winterThemeBtn').classList.add('active');
        document.getElementById('frostEffect').classList.remove('hidden');
        createSnowflakes();
      }
      
      // Update UI
      updateCoinDisplay();
      updateDailyChallenge();
      refreshThemeOptions();
      updateGameStats();
      
      // Setup tombol kembali
      setupBackButton();
    };
    
    // Setup Tombol Kembali
    function setupBackButton() {
      const backBtn = document.getElementById('backBtn');
      backBtn.addEventListener('click', goBack);
    }
    
    function goBack() {
      const gameArea = document.getElementById('gameArea');
      const aiMode = document.getElementById('aiMode');
      const mainMenu = document.getElementById('mainMenu');
      
      if (!gameArea.classList.contains('hidden')) {
        gameArea.classList.add('hidden');
        mainMenu.classList.remove('hidden');
        stopTimer();
      } else if (!aiMode.classList.contains('hidden')) {
        aiMode.classList.add('hidden');
        mainMenu.classList.remove('hidden');
      }
    }
    
    // Fungsi Tema
    function changeTheme() {
      const theme = document.getElementById('themeSelect').value;
      document.body.classList.remove('light-mode', 'neon', 'custom-theme', 'rainbow-theme', 'orion-theme', 'cyber-theme', 'winter-theme');
      document.getElementById('frostEffect').classList.add('hidden');
      
      // Hapus semua snowflakes jika ada
      const snowflakes = document.querySelectorAll('.snowflake');
      snowflakes.forEach(snowflake => snowflake.remove());
      
      if (theme === 'light') {
        document.body.classList.add('light-mode');
        document.body.style.background = "#f8fafc";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'light');
      } else if (theme === 'neon') {
        document.body.classList.add('neon');
        document.body.style.background = "linear-gradient(135deg, #0fffc1, #7e0fff 80%)";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'neon');
      } else if (theme === 'winter') {
        document.body.classList.add('winter-theme');
        document.body.style.background = "linear-gradient(135deg, var(--winter-primary), var(--winter-secondary) 90%)";
        document.getElementById('customThemePicker').classList.add('hidden');
        document.getElementById('frostEffect').classList.remove('hidden');
        createSnowflakes();
        localStorage.setItem('theme', 'winter');
      } else if (theme === 'custom') {
        document.body.classList.add('custom-theme');
        document.getElementById('customThemePicker').classList.remove('hidden');
        applyCustomTheme();
        localStorage.setItem('theme', 'custom');
      } else if (theme === 'rainbow') {
        document.body.classList.add('rainbow-theme');
        document.body.style.background = "";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'rainbow');
      } else if (theme === 'orion') {
        document.body.classList.add('orion-theme');
        document.body.style.background = "";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'orion');
      } else if (theme === 'cyber') {
        document.body.classList.add('cyber-theme');
        document.body.style.background = "";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'cyber');
      } else {
        // Default: dark
        document.body.style.background = "linear-gradient(135deg, #1e40af, #3b82f6)";
        document.getElementById('customThemePicker').classList.add('hidden');
        localStorage.setItem('theme', 'dark');
      }
    }
    
    function applyCustomTheme() {
      const color1 = document.getElementById('color1').value;
      const color2 = document.getElementById('color2').value;
      document.body.classList.add('custom-theme');
      document.body.style.background = `linear-gradient(135deg, ${color1}, ${color2})`;
    }
    
    // Event listener untuk tombol tema
    document.getElementById('zazThemeBtn').addEventListener('click', function() {
      document.body.classList.toggle('zaz-theme');
      this.classList.toggle('active');
      
      if (document.body.classList.contains('zaz-theme')) {
        localStorage.setItem('theme', 'zaz');
        // Nonaktifkan winter theme jika aktif
        if (document.body.classList.contains('winter-theme')) {
          document.body.classList.remove('winter-theme');
          document.getElementById('winterThemeBtn').classList.remove('active');
          document.getElementById('frostEffect').classList.add('hidden');
          // Hapus snowflakes
          const snowflakes = document.querySelectorAll('.snowflake');
          snowflakes.forEach(snowflake => snowflake.remove());
        }
      } else {
        localStorage.removeItem('theme');
      }
    });
    
    document.getElementById('winterThemeBtn').addEventListener('click', function() {
      document.body.classList.toggle('winter-theme');
      this.classList.toggle('active');
      
      if (document.body.classList.contains('winter-theme')) {
        localStorage.setItem('theme', 'winter');
        document.getElementById('frostEffect').classList.remove('hidden');
        createSnowflakes();
        
        // Nonaktifkan zaz theme jika aktif
        if (document.body.classList.contains('zaz-theme')) {
          document.body.classList.remove('zaz-theme');
          document.getElementById('zazThemeBtn').classList.remove('active');
        }
      } else {
        localStorage.removeItem('theme');
        document.getElementById('frostEffect').classList.add('hidden');
        // Hapus snowflakes
        const snowflakes = document.querySelectorAll('.snowflake');
        snowflakes.forEach(snowflake => snowflake.remove());
      }
    });
    
    // Fungsi untuk membuat efek salju
    function createSnowflakes() {
      const snowflakeSymbols = ['‚ùÑ', '‚ùÖ', '‚ùÜ'];
      const snowflakeCount = 30;
      
      for (let i = 0; i < snowflakeCount; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.innerHTML = snowflakeSymbols[Math.floor(Math.random() * snowflakeSymbols.length)];
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.animationDuration = Math.random() * 3 + 2 + 's'; // antara 2-5 detik
        snowflake.style.opacity = Math.random();
        snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
        
        document.body.appendChild(snowflake);
      }
    }
    
    // Fungsi Game
    function showVerification() {
      document.getElementById('verificationModal').classList.remove('hidden');
    }
    
    function verifyUser() {
      const userInput = document.getElementById('verificationInput').value.trim();
      const correctCode = "zaS nEON";
      if (userInput === correctCode) {
        closeVerificationModal();
        startGame();
      } else {
        showNotification("Kode verifikasi salah! ‚ùå");
      }
    }
    
    function closeVerificationModal() {
      document.getElementById('verificationModal').classList.add('hidden');
    }
    
    function startGame() {
      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('gameArea').classList.remove('hidden');
      document.getElementById('backBtn').style.display = 'flex';
      
      secretNumber = Math.floor(Math.random() * maxNumber) + 1;
      attempts = 0;
      guessHistory = [];
      comboCount = 0;
      isDailyChallenge = false;
      
      // Reset UI
      document.getElementById('result').textContent = '';
      document.getElementById('feedback').textContent = '';
      document.getElementById('hint').textContent = '';
      document.getElementById('guess').value = '';
      document.getElementById('guess').disabled = false;
      document.getElementById('guessBtn').disabled = false;
      document.getElementById('hintBtn').disabled = false;
      document.getElementById('resetBtn').style.display = 'none';
      
      // Update stats
      updateStats();
      startTimer();
      
      console.log("Secret Number (debug):", secretNumber);
      
      // Update quest
      updateQuestProgress("daily", "daily1", 1);
      updateQuestProgress("weekly", "weekly1", 1);
    }
    
    function startDailyChallenge() {
      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('gameArea').classList.remove('hidden');
      document.getElementById('backBtn').style.display = 'flex';
      
      secretNumber = Math.floor(Math.random() * maxNumber) + 1;
      attempts = 0;
      guessHistory = [];
      comboCount = 0;
      isDailyChallenge = true;
      dailyChallengeCompleted = false;
      
      // Reset UI
      document.getElementById('result').textContent = 'Tantangan Harian: Tebak dalam kurang dari 5 percobaan!';
      document.getElementById('feedback').textContent = '';
      document.getElementById('hint').textContent = '';
      document.getElementById('guess').value = '';
      document.getElementById('guess').disabled = false;
      document.getElementById('guessBtn').disabled = false;
      document.getElementById('hintBtn').disabled = false;
      document.getElementById('resetBtn').style.display = 'none';
      
      // Update stats
      updateStats();
      startTimer();
      
      console.log("Secret Number (debug):", secretNumber);
    }
    
    function makeGuess() {
      const guessInput = document.getElementById('guess');
      const guess = Number(guessInput.value);
      
      if (!guess && guess !== 0) {
        showNotification("Masukkan angka yang valid! ‚ùå");
        return;
      }
      
      attempts++;
      guessHistory.push(guess);
      updateStats();
      
      if (guess === secretNumber) {
        // Menang
        comboCount++;
        
        // Update combo
        if (comboCount >= 3) {
          showComboEffect(`Combo x${comboCount}! üî•`);
        }
        
        // Cek level up
        if (comboCount >= 5) {
          levelUp();
        }
        
        // Cek daily challenge
        if (isDailyChallenge && attempts <= 5 && !dailyChallengeCompleted) {
          dailyChallengeCompleted = true;
          userCoins += 50;
          localStorage.setItem('userCoins', userCoins);
          updateCoinDisplay();
          showNotification("üéØ Tantangan Harian selesai! +50 koin!");
          updateAchievement("dailyChallenge", 1);
        }
        
        // Cek perfect game
        if (attempts === 1) {
          updateAchievement("perfectGame", 1);
        }
        
        // Cek lucky 7
        if (attempts <= 7) {
          updateAchievement("lucky7", 1);
        }
        
        // Cek speed demon
        if (currentTime < 10) {
          updateAchievement("speedDemon", 1);
          document.getElementById('result').classList.add('lightning-effect');
        }
        
        // Update achievement first win
        updateAchievement("firstWin", 1);
        
        // Tampilkan pesan kemenangan
        const message = `üéâ Selamat! Tebakan benar: ${secretNumber} dalam ${attempts} percobaan dan ${currentTime} detik.`;
        document.getElementById('result').innerHTML = message;
        
        // Update statistik
        updateHighScore();
        updateGameStats();
        
        // Tampilkan confetti
        showConfetti();
        
        // Beri koin
        const coinsEarned = Math.max(10, 30 - attempts);
        userCoins += coinsEarned;
        localStorage.setItem('userCoins', userCoins);
        updateCoinDisplay();
        
        // Update quest
        updateQuestProgress("daily", "daily2", 1);
        updateQuestProgress("weekly", "weekly2", 1);
        
        // Disable input
        document.getElementById('guess').disabled = true;
        document.getElementById('guessBtn').disabled = true;
        document.getElementById('hintBtn').disabled = true;
        document.getElementById('resetBtn').style.display = 'inline-block';
        
        // Stop timer
        stopTimer();
        
        // Mulai game baru otomatis
        setTimeout(() => {
          startNewRound();
        }, 3000);
      } else {
        // Salah
        comboCount = 0;
        document.getElementById('feedback').textContent = guess < secretNumber ? 'Terlalu kecil! üëá' : 'Terlalu besar! üëÜ';
      }
      
      guessInput.value = '';
      guessInput.focus();
    }
    
    function startNewRound() {
      secretNumber = Math.floor(Math.random() * maxNumber) + 1;
      attempts = 0;
      guessHistory = [];
      
      // Reset UI
      document.getElementById('result').textContent = '';
      document.getElementById('result').classList.remove('lightning-effect');
      document.getElementById('feedback').textContent = '';
      document.getElementById('hint').textContent = '';
      document.getElementById('guess').value = '';
      document.getElementById('guess').disabled = false;
      document.getElementById('guessBtn').disabled = false;
      document.getElementById('hintBtn').disabled = false;
      document.getElementById('resetBtn').style.display = 'none';
      
      // Reset timer
      currentTime = 0;
      updateStats();
      startTimer();
      
      console.log("Secret Number (debug):", secretNumber);
    }
    
    function showHint() {
      if (attempts >= 3) {
        const hint = secretNumber % 2 === 0 
          ? 'Hint: Angka rahasia adalah genap. ‚ûï'
          : 'Hint: Angka rahasia adalah ganjil. ‚ûñ';
        document.getElementById('hint').textContent = hint;
        document.getElementById('hintBtn').disabled = true;
      } else {
        document.getElementById('hint').textContent = `Cobalah ${3 - attempts} tebakan lagi untuk mendapatkan hint! ü§î`;
      }
    }
    
    function resetGame() {
      stopTimer();
      startGame();
    }
    
    function updateStats() {
      document.getElementById('attemptsCount').textContent = attempts;
      document.getElementById('comboCount').textContent = comboCount;
    }
    
    function startTimer() {
      stopTimer(); // Pastikan timer sebelumnya berhenti
      currentTime = 0;
      gameTimer = setInterval(() => {
        currentTime++;
        document.getElementById('timer').textContent = currentTime;
      }, 1000);
    }
    
    function stopTimer() {
      if (gameTimer) {
        clearInterval(gameTimer);
        gameTimer = null;
      }
    }
    
    function updateHighScore() {
      const bestScore = localStorage.getItem('highScore');
      if (!bestScore || attempts < bestScore) {
        localStorage.setItem('highScore', attempts);
      }
      displayHighScore();
    }
    
    function displayHighScore() {
      const bestScore = localStorage.getItem('highScore');
      document.getElementById('highScore').textContent = bestScore || '-';
    }
    
    function updateGameStats() {
      let totalGames = Number(localStorage.getItem('totalGames') || 0) + 1;
      let totalWins = Number(localStorage.getItem('totalWins') || 0) + 1;
      let totalAttempts = Number(localStorage.getItem('totalAttempts') || 0) + attempts;
      let totalTime = Number(localStorage.getItem('totalTime') || 0) + currentTime;
      
      localStorage.setItem('totalGames', totalGames);
      localStorage.setItem('totalWins', totalWins);
      localStorage.setItem('totalAttempts', totalAttempts);
      localStorage.setItem('totalTime', totalTime);
      
      // Update win rate
      const winRate = Math.round((totalWins / totalGames) * 100);
      document.getElementById('totalGames').textContent = totalGames;
      document.getElementById('winRate').textContent = winRate + '%';
      
      // Update level
      updateLevel();
    }
    
    function updateLevel() {
      const totalWins = Number(localStorage.getItem('totalWins') || 0);
      
      // Cari level yang sesuai
      for (let i = 0; i < LEVELS.length; i++) {
        if (totalWins >= LEVELS[i].min && totalWins <= LEVELS[i].max) {
          level = i + 1;
          document.getElementById('currentLevel').textContent = level;
          document.getElementById('levelTitle').textContent = LEVELS[i].name;
          
          // Update progress bar
          const progress = ((totalWins - LEVELS[i].min) / (LEVELS[i].max - LEVELS[i].min)) * 100;
          document.getElementById('levelProgress').style.width = progress + '%';
          
          // Cek achievement level up
          if (level >= 5) {
            updateAchievement("levelUp", 1);
          }
          
          break;
        }
      }
    }
    
    function levelUp() {
      const levelUpMessage = document.createElement('div');
      levelUpMessage.className = 'level-up';
      levelUpMessage.textContent = `Level Up! üéâ Kamu sekarang di Level ${level}`;
      document.body.appendChild(levelUpMessage);
      
      setTimeout(() => {
        levelUpMessage.remove();
      }, 3000);
      
      showConfetti(50);
    }
    
    function showComboEffect(message) {
      const comboEffect = document.createElement('div');
      comboEffect.className = 'combo-effect';
      comboEffect.textContent = message;
      document.body.appendChild(comboEffect);
      
      setTimeout(() => {
        comboEffect.remove();
      }, 2000);
    }
    
    function showConfetti(amount = 30) {
      const confettiContainer = document.getElementById('confettiContainer');
      if (!confettiContainer) return;
      
      for (let i = 0; i < amount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        const colors = ['#FFC107', '#FF5722', '#8BC34A', '#00BCD4', '#E91E63', '#9C27B0', '#3F51B5'];
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.animationDelay = Math.random() * 2 + 's';
        confettiContainer.appendChild(confetti);
      }
      
      setTimeout(() => {
        confettiContainer.innerHTML = '';
      }, 7000);
    }
    
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    
    // Mode AI
    function startAIMode() {
      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('aiMode').classList.remove('hidden');
      document.getElementById('backBtn').style.display = 'flex';
      
      // Reset variabel
      aiNumber = Math.floor(Math.random() * 100) + 1;
      playerAttemptsAI = 0;
      aiAttemptsAI = 0;
      aiMin = 1;
      aiMax = 100;
      aiThinking = false;
      
      // Reset UI
      document.getElementById('playerGuess').value = '';
      document.getElementById('playerAttempts').textContent = '0';
      document.getElementById('aiAttempts').textContent = '0';
      document.getElementById('aiResult').textContent = '';
      document.getElementById('playerResult').textContent = '';
      document.getElementById('aiStatus').innerHTML = '<p>AI sedang berpikir...</p>';
      
      // Mulai AI
      setTimeout(() => {
        aiMakeGuess();
      }, 1000);
    }
    
    function playerMakeGuess() {
      const guess = Number(document.getElementById('playerGuess').value);
      
      if (!guess && guess !== 0) {
        showNotification("Masukkan angka yang valid! ‚ùå");
        return;
      }
      
      playerAttemptsAI++;
      document.getElementById('playerAttempts').textContent = playerAttemptsAI;
      
      if (guess === aiNumber) {
        document.getElementById('playerResult').textContent = `üéâ Anda menang dalam ${playerAttemptsAI} percobaan!`;
        updateAchievement("beatAI", 1);
      } else if (guess < aiNumber) {
        document.getElementById('aiStatus').innerHTML = `<p>AI: "Terlalu kecil!" üëá</p>`;
      } else {
        document.getElementById('aiStatus').innerHTML = `<p>AI: "Terlalu besar!" üëÜ</p>`;
      }
      
      document.getElementById('playerGuess').value = '';
      document.getElementById('playerGuess').focus();
    }
    
    function aiMakeGuess() {
      if (aiThinking) return;
      
      aiThinking = true;
      const difficulty = document.getElementById('aiDifficulty').value;
      let aiGuess;
      
      if (difficulty === 'easy') {
        // Easy: AI menebak secara acak
        aiGuess = Math.floor(Math.random() * (aiMax - aiMin + 1)) + aiMin;
      } else if (difficulty === 'medium') {
        // Medium: AI menggunakan binary search
        aiGuess = Math.floor((aiMin + aiMax) / 2);
      } else if (difficulty === 'hard') {
        // Hard: AI dengan sedikit kesalahan
        const bias = Math.random() < 0.3 ? -1 : (Math.random() < 0.6 ? 0 : 1);
        aiGuess = Math.floor((aiMin + aiMax) / 2) + bias;
        aiGuess = Math.max(aiMin, Math.min(aiMax, aiGuess));
      } else if (difficulty === 'expert') {
        // Expert: AI hampir sempurna
        aiGuess = Math.floor((aiMin + aiMax) / 2);
      }
      
      aiAttemptsAI++;
      document.getElementById('aiAttempts').textContent = aiAttemptsAI;
      
      // Update status AI
      document.getElementById('aiStatus').innerHTML = `<p>AI menebak: ${aiGuess}</p>`;
      
      setTimeout(() => {
        if (aiGuess === aiNumber) {
          document.getElementById('aiResult').textContent = `ü§ñ AI menang dalam ${aiAttemptsAI} percobaan!`;
        } else if (aiGuess < aiNumber) {
          aiMin = aiGuess + 1;
          document.getElementById('aiStatus').innerHTML = `<p>AI: "Terlalu kecil!" üëá</p>`;
          
          // Lanjutkan menebak
          setTimeout(() => {
            aiThinking = false;
            aiMakeGuess();
          }, 1500);
        } else {
          aiMax = aiGuess - 1;
          document.getElementById('aiStatus').innerHTML = `<p>AI: "Terlalu besar!" üëÜ</p>`;
          
          // Lanjutkan menebak
          setTimeout(() => {
            aiThinking = false;
            aiMakeGuess();
          }, 1500);
        }
      }, 1000);
    }
    
    // Sistem Quest
    function getQuestKey(type) {
      const now = new Date();
      if (type === "daily") {
        return "quest_daily_" + now.getFullYear() + "_" + now.getMonth() + "_" + now.getDate();
      } else {
        const firstDay = new Date(now.getFullYear(),0,1);
        const week = Math.ceil((((now - firstDay) / 86400000) + firstDay.getDay()+1)/7);
        return "quest_weekly_" + now.getFullYear() + "_w" + week;
      }
    }
    
    function loadQuestProgress() {
      let daily = JSON.parse(localStorage.getItem(getQuestKey("daily"))||"{}");
      let weekly = JSON.parse(localStorage.getItem(getQuestKey("weekly"))||"{}");
      return { daily, weekly };
    }
    
    function saveQuestProgress(type, data) {
      localStorage.setItem(getQuestKey(type), JSON.stringify(data));
    }
    
    function updateQuestProgress(type, id, add=1) {
      const progress = loadQuestProgress();
      if(!progress[type][id]) progress[type][id]=0;
      progress[type][id] += add;
      saveQuestProgress(type, progress[type]);
      
      // Notif jika selesai
      const quest = QUESTS.find(q=>q.id===id);
      if(progress[type][id]===quest.goal) {
        showNotification(`üéâ Quest "${quest.desc}" selesai! +${quest.reward} koin`);
        userCoins += quest.reward;
        localStorage.setItem('userCoins', userCoins);
        updateCoinDisplay();
      }
    }
    
    function showQuestPopup() {
      let modal = document.getElementById('questModal');
      let progress = loadQuestProgress();
      let html = `<div class="modal-content"><h2>üéØ Quest Harian & Mingguan</h2>`;
      
      html += `<div class="list-group">`;
      QUESTS.forEach(q=>{
        let prog = (progress[q.type][q.id]||0);
        let done = prog>=q.goal;
        html += `
          <div class="list-group-item">
            <div>
              <strong>${q.desc}</strong>
              <div class="progress">
                <div class="progress-bar" style="width: ${Math.min(100, prog/q.goal*100)}%"></div>
              </div>
              <small>${prog}/${q.goal} ${done ? '<span style="color:#10b981;">‚úîÔ∏è Selesai</span>' : ''}</small>
            </div>
            <span style="color:#f59e0b; font-weight:600;">+${q.reward}</span>
          </div>
        `;
      });
      html += `</div>`;
      
      html += `<button class="btn btn-primary" onclick="closeQuestPopup()">Tutup</button></div>`;
      modal.innerHTML = html;
      modal.classList.remove('hidden');
    }
    
    function closeQuestPopup() {
      document.getElementById('questModal').classList.add('hidden');
    }
    
    // Sistem Achievement
    function getAchievements() {
      return JSON.parse(localStorage.getItem("achievements")||"{}");
    }
    
    function saveAchievements(achievements) {
      localStorage.setItem("achievements", JSON.stringify(achievements));
    }
    
    function updateAchievement(id, value = 1) {
      const achievements = getAchievements();
      
      if (!achievements[id]) {
        achievements[id] = 0;
      }
      
      achievements[id] += value;
      
      // Check if achievement is unlocked
      const achievement = ACHIEVEMENTS.find(a => a.id === id);
      if (achievement && achievements[id] >= 1) {
        showAchievementNotification(achievement);
      }
      
      // Check coin collector achievement
      if (userCoins >= 500) {
        updateAchievement("coinCollector", 1);
      }
      
      // Check winter master achievement
      if (localStorage.getItem('theme') === 'winter') {
        const winterGames = Number(localStorage.getItem('winterGames') || 0) + 1;
        localStorage.setItem('winterGames', winterGames);
        
        if (winterGames >= 10) {
          updateAchievement("winterMaster", 1);
        }
      }
      
      saveAchievements(achievements);
    }
    
    function showAchievementNotification(achievement) {
      const notif = document.createElement('div');
      notif.className = 'achievement-notification';
      notif.innerHTML = `
        <div style="font-size: 24px; margin-bottom: 10px;">${achievement.icon}</div>
        <div style="font-weight: 700; margin-bottom: 5px;">Achievement Unlocked!</div>
        <div>${achievement.name}</div>
      `;
      
      document.body.appendChild(notif);
      
      setTimeout(() => {
        notif.style.opacity = '0';
        setTimeout(() => notif.remove(), 500);
      }, 3000);
    }
    
    function showAchievements() {
      const achievements = getAchievements();
      let html = `<div class="modal-content"><h2>üèÜ Achievements</h2>`;
      
      html += `<div class="grid">`;
      ACHIEVEMENTS.forEach(achievement => {
        const unlocked = achievements[achievement.id] >= 1;
        html += `
          <div class="grid-item" style="background: ${unlocked ? 'rgba(16, 185, 129, 0.1)' : 'rgba(0,0,0,0.05)'}">
            <div style="font-size: 32px; margin-bottom: 10px;">${achievement.icon}</div>
            <h3 style="margin-bottom: 5px;">${achievement.name}</h3>
            <p style="font-size: 14px; color: #64748b;">${achievement.desc}</p>
            <div style="margin-top: 10px; font-weight: 600; color: ${unlocked ? '#10b981' : '#94a3b8'}">
              ${unlocked ? '‚úì Unlocked' : 'Locked'}
            </div>
          </div>
        `;
      });
      html += `</div>`;
      
      html += `<button class="btn btn-primary" onclick="closeAchievements()">Tutup</button></div>`;
      
      const modal = document.getElementById('achievementsModal');
      modal.innerHTML = html;
      modal.classList.remove('hidden');
    }
    
    function closeAchievements() {
      document.getElementById('achievementsModal').classList.add('hidden');
    }
    
    // Shop Tema
    function getOwnedThemes() {
      return JSON.parse(localStorage.getItem("ownedThemes")||"[]");
    }
    
    function setOwnedThemes(arr) {
      localStorage.setItem("ownedThemes", JSON.stringify(arr));
    }
    
    function showThemeShop() {
      let owned = getOwnedThemes();
      let html = `<div class="modal-content"><h2>üõí Shop Tema Eksklusif</h2>`;
      
      html += `<div class="list-group">`;
      THEME_SHOP.forEach(t => {
        const bought = owned.includes(t.id);
        html += `
          <div class="list-group-item">
            <div>
              <h3>${t.name}</h3>
              <p style="color: #64748b; margin: 5px 0;">${t.desc}</p>
            </div>
            <div>
              ${bought ? 
                `<span style="color: #10b981; font-weight: 600;">Sudah dibeli</span>` : 
                `<button class="btn btn-primary" onclick="buyTheme('${t.id}',${t.price})">${t.price} Koin</button>`
              }
            </div>
          </div>
        `;
      });
      html += `</div>`;
      
      html += `<button class="btn btn-secondary" onclick="closeThemeShop()">Tutup</button></div>`;
      
      const modal = document.getElementById('themeShopModal');
      modal.innerHTML = html;
      modal.classList.remove('hidden');
    }
    
    function closeThemeShop() {
      document.getElementById('themeShopModal').classList.add('hidden');
      refreshThemeOptions();
    }
    
    function buyTheme(id, price) {
      if(userCoins < price) {
        showNotification("Koin tidak cukup!");
        return;
      }
      
      let owned = getOwnedThemes();
      if(owned.includes(id)) return;
      
      userCoins -= price;
      localStorage.setItem('userCoins', userCoins);
      updateCoinDisplay();
      
      owned.push(id);
      setOwnedThemes(owned);
      
      closeThemeShop();
      refreshThemeOptions();
      showNotification("Berhasil membeli tema! Silakan pilih di menu tema.");
    }
    
    function unlockThemeOption(id) {
      const select = document.getElementById('themeSelect');
      const idx = {
        "rainbow": 5, 
        "orion": 6, 
        "cyber": 7,
        "fire": 8,
        "nature": 9
      }[id];
      
      if(select && select.options[idx]) {
        select.options[idx].disabled = false;
      }
    }
    
    function refreshThemeOptions() {
      const owned = getOwnedThemes();
      ["rainbow","orion","cyber","fire","nature"].forEach((id)=>{
        if(owned.includes(id)) unlockThemeOption(id);
      });
    }
    
    // Update Koin
    function updateCoinDisplay() {
      document.getElementById('coinAmount').textContent = userCoins;
    }
    
    // Update Daily Challenge
    function updateDailyChallenge() {
      const challenges = [
        "Tebak angka dalam kurang dari 5 percobaan!",
        "Menang dalam waktu kurang dari 30 detik!",
        "Dapatkan combo x3 dalam satu game!",
        "Mainkan 3 game berturut-turut!"
      ];
      
      const today = new Date().getDate();
      const challengeIndex = today % challenges.length;
      
      const descElement = document.getElementById('dailyChallengeDesc');
      if (descElement) {
        descElement.textContent = challenges[challengeIndex];
      }
    }
    
    // Changelog
    function showChangelog() {
      let html = `<div class="modal-content"><h2>üìú Changelog TebakX</h2>`;
      
      html += `<div style="max-height: 60vh; overflow-y: auto; padding-right: 10px;">`;
      html += `
        <div class="card mb-10">
          <h3 style="color: #0ea5e9;">v3.6 NCS Winter Edition</h3>
          <ul style="padding-left: 20px; margin-top: 10px;">
            <li>‚ùÑÔ∏è Tema eksklusif Winter Edition dengan efek salju</li>
            <li>üå®Ô∏è Animasi salju & efek beku yang realistis</li>
            <li>üéØ Tantangan Harian dengan hadiah koin</li>
            <li>üèÜ Sistem pencapaian (Achievements)</li>
            <li>üé® UI/UX lebih responsif & modern</li>
            <li>üêû Bug fix & optimisasi performa</li>
          </ul>
        </div>
        
        <div class="card mb-10">
          <h3 style="color: #8b5cf6;">v3.5 Zaz Version</h3>
          <ul style="padding-left: 20px; margin-top: 10px;">
            <li>üé® Tema eksklusif Zaz Version</li>
            <li>üöÄ UI/UX dirombak total, lebih modern & rapi</li>
            <li>üì± Responsif di semua perangkat</li>
            <li>‚ö° Optimisasi performa</li>
            <li>üåü Splash screen baru makin keren</li>
            <li>üêû Bug fix minor</li>
          </ul>
        </div>
        
        <div class="card mb-10">
          <h3 style="color: #3b82f6;">v3.4</h3>
          <ul style="padding-left: 20px; margin-top: 10px;">
            <li>üéØ Penambahan Quest Harian & Mingguan (reset otomatis)</li>
            <li>üí∞ Koin reward quest & Shop Tema Eksklusif</li>
            <li>üé® Tema Rainbow, Orion, Cyber bisa dibeli dengan koin</li>
            <li>üêû Perbaikan bug & optimasi performa</li>
            <li>üì± UI makin responsif di semua perangkat</li>
            <li>üôè Terima kasih untuk semua feedback!</li>
          </ul>
        </div>
      `;
      html += `</div>`;
      
      html += `<button class="btn btn-primary" onclick="closeChangelog()">Tutup</button></div>`;
      
      const modal = document.getElementById('changelogModal');
      modal.innerHTML = html;
      modal.classList.remove('hidden');
    }
    
    function closeChangelog() {
      document.getElementById('changelogModal').classList.add('hidden');
    }
    
    // Reset All Data
    function resetAllData() {
      if (confirm("Apakah Anda yakin ingin mereset semua data? Ini akan menghapus semua progress, koin, dan pencapaian Anda.")) {
        localStorage.clear();
        userCoins = 0;
        level = 1;
        comboCount = 0;
        updateCoinDisplay();
        showNotification("Semua data telah direset!");
        
        // Reload page after a short delay
        setTimeout(() => {
          location.reload();
        }, 1500);
      }
    }
    
    // Event listener untuk tombol Enter
    document.addEventListener('DOMContentLoaded', function() {
      const guessInput = document.getElementById('guess');
      if (guessInput) {
        guessInput.addEventListener('keydown', function(event) {
          if (event.key === 'Enter') {
            event.preventDefault();
            makeGuess();
          }
        });
      }
      
      const playerGuessInput = document.getElementById('playerGuess');
      if (playerGuessInput) {
        playerGuessInput.addEventListener('keydown', function(event) {
          if (event.key === 'Enter') {
            event.preventDefault();
            playerMakeGuess();
          }
        });
      }
    });
  </script>
</body>
</html>
